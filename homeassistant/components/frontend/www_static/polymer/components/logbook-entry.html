<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="domain-icon.html">
<link rel="import" href="display-time.html">
<link rel="import" href="relative-ha-datetime.html">

<dom-module is="logbook-entry">
  <style>
    :host {
      display: block;
      line-height: 2em;
    }

    display-time {
      width: 55px;
      font-size: .8em;
      color: var(--secondary-text-color);
    }

    domain-icon {
      margin: 0 8px 0 16px;
      color: var(--primary-text-color);
    }

    .name {
      text-transform: capitalize;
    }

    .message {
      color: var(--primary-text-color);
    }

    a {
      color: var(--accent-color);
    }
  </style>
  <template>
    <div class='horizontal layout'>
      <display-time date-obj="[[entryObj.when]]"></display-time>
      <domain-icon domain="[[entryObj.domain]]" class='icon'></domain-icon>
      <div class='message' flex>
        <template is='dom-if' if="[[!entryObj.entityId]]">
          <span class='name'>[[entryObj.name]]</span>
        </template>
        <template is='dom-if' if="[[entryObj.entityId]]">
          <a href='#' on-click="entityClicked" class='name'>[[entryObj.name]]</a>
        </template>
        <span>[[entryObj.message]]</span>
      </div>
    </div>
  </template>
</dom-module>

<script>
  (function() {
    var uiActions = window.hass.uiActions;

    Polymer({
      is: 'logbook-entry',

      entityClicked: function(ev) {
        ev.preventDefault();
        uiActions.showMoreInfoDialog(this.entryObj.entityId);
      }
    });

  })();
</script>
