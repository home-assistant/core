# ğŸ¨ DayBetter Services UI é…ç½®æŒ‡å—

## âœ… å·²æ·»åŠ  UI é…ç½®æ”¯æŒï¼

ç°åœ¨ä½ å¯ä»¥é€šè¿‡ Home Assistant çš„ UI ç•Œé¢ç›´æ¥æ·»åŠ é›†æˆäº†ï¼

---

## ğŸš€ é€šè¿‡ UI æ·»åŠ é›†æˆï¼ˆ3 æ­¥ï¼‰

### 1ï¸âƒ£ é‡å¯ Home Assistant

å¦‚æœä½ æ­£åœ¨è°ƒè¯•æ¨¡å¼è¿è¡Œï¼š
1. æŒ‰ `Shift+F5` åœæ­¢è°ƒè¯•
2. è¿è¡Œæ›´æ–°ä»»åŠ¡ï¼š
   - æŒ‰ `Ctrl+Shift+P`
   - é€‰æ‹© `Tasks: Run Task`
   - é€‰æ‹© `ğŸ“‹ DayBetter: å¤åˆ¶åˆ° custom_components`
3. æŒ‰ `F5` é‡æ–°å¯åŠ¨è°ƒè¯•

### 2ï¸âƒ£ è®¿é—®é›†æˆé¡µé¢

æ‰“å¼€æµè§ˆå™¨ï¼š`http://localhost:8123`

å¯¼èˆªåˆ°ï¼š
```
è®¾ç½® â†’ è®¾å¤‡ä¸æœåŠ¡ â†’ æ·»åŠ é›†æˆ
```

æˆ–ç›´æ¥è®¿é—®ï¼š
```
http://localhost:8123/config/integrations
```

### 3ï¸âƒ£ æœç´¢å¹¶æ·»åŠ 

1. ç‚¹å‡»å³ä¸‹è§’ **"+ æ·»åŠ é›†æˆ"** æŒ‰é’®
2. åœ¨æœç´¢æ¡†è¾“å…¥ï¼š`DayBetter`
3. ç‚¹å‡» **DayBetter Services**
4. åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­ï¼š
   - æŸ¥çœ‹è¯´æ˜
   - ï¼ˆå¯é€‰ï¼‰ä¿®æ”¹é›†æˆåç§°
   - ç‚¹å‡» **"æäº¤"**
5. å®Œæˆï¼âœ…

---

## ğŸ“‹ æ·»åŠ åä¼šçœ‹åˆ°ä»€ä¹ˆ

### é›†æˆå¡ç‰‡

åœ¨ **è®¾å¤‡ä¸æœåŠ¡** é¡µé¢ä¼šçœ‹åˆ°ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DayBetter Services                  â”‚
â”‚                                     â”‚
â”‚ ğŸ“Š X ä¸ªè®¾å¤‡                         â”‚
â”‚ ğŸŒ¡ï¸ Y ä¸ªå®ä½“                        â”‚
â”‚                                     â”‚
â”‚ [é…ç½®] [é€‰é¡¹]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è‡ªåŠ¨å‘ç°çš„ä¼ æ„Ÿå™¨

é›†æˆä¼šè‡ªåŠ¨åˆ›å»ºæ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ï¼š

- `sensor.<è®¾å¤‡ç»„å>_temperature` - æ¸©åº¦ï¼ˆÂ°Cï¼‰
- `sensor.<è®¾å¤‡ç»„å>_humidity` - æ¹¿åº¦ï¼ˆ%ï¼‰

---

## ğŸ” æŸ¥çœ‹ä¼ æ„Ÿå™¨

### æ–¹å¼ 1ï¼šé€šè¿‡è®¾å¤‡ä¸æœåŠ¡

1. è¿›å…¥ **è®¾ç½® â†’ è®¾å¤‡ä¸æœåŠ¡**
2. æ‰¾åˆ° **DayBetter Services** å¡ç‰‡
3. ç‚¹å‡» **"X ä¸ªè®¾å¤‡"** æŸ¥çœ‹è®¾å¤‡åˆ—è¡¨
4. ç‚¹å‡»è®¾å¤‡æŸ¥çœ‹è¯¦æƒ…å’Œä¼ æ„Ÿå™¨

### æ–¹å¼ 2ï¼šé€šè¿‡å¼€å‘è€…å·¥å…·

1. è¿›å…¥ **å¼€å‘è€…å·¥å…· â†’ çŠ¶æ€**
2. æœç´¢ `sensor.`
3. æŸ¥æ‰¾ä»¥ `sensor.*_temperature` æˆ– `sensor.*_humidity` å¼€å¤´çš„å®ä½“

### æ–¹å¼ 3ï¼šé€šè¿‡ä»ªè¡¨æ¿

1. è¿›å…¥ **æ¦‚è§ˆ** ä»ªè¡¨æ¿
2. ç‚¹å‡»å³ä¸Šè§’ **ç¼–è¾‘ä»ªè¡¨æ¿**
3. ç‚¹å‡» **+ æ·»åŠ å¡ç‰‡**
4. é€‰æ‹© **å®ä½“** å¡ç‰‡
5. æœç´¢å¹¶æ·»åŠ ä½ çš„æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨

---

## ğŸ¯ æ·»åŠ åˆ°ä»ªè¡¨æ¿ç¤ºä¾‹

### ç®€å•å®ä½“å¡ç‰‡

```yaml
type: entities
title: DayBetter ä¼ æ„Ÿå™¨
entities:
  - entity: sensor.test_group_temperature
    name: æ¸©åº¦
  - entity: sensor.test_group_humidity
    name: æ¹¿åº¦
```

### ä»ªè¡¨å¡ç‰‡

```yaml
type: gauge
entity: sensor.test_group_temperature
name: å®¤å†…æ¸©åº¦
min: 0
max: 40
severity:
  green: 18
  yellow: 25
  red: 30
```

### å†å²å›¾è¡¨

```yaml
type: history-graph
title: æ¸©æ¹¿åº¦å†å²
entities:
  - entity: sensor.test_group_temperature
  - entity: sensor.test_group_humidity
hours_to_show: 24
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### å½“å‰é…ç½®

ç›®å‰é›†æˆä½¿ç”¨é»˜è®¤é…ç½®ï¼š
- âœ… è‡ªåŠ¨å‘ç°æ‰€æœ‰ `type=5` çš„æ¸©æ¹¿åº¦è®¾å¤‡
- âœ… æ¯ 30 ç§’è‡ªåŠ¨æ›´æ–°ä¸€æ¬¡æ•°æ®
- âœ… è‡ªåŠ¨ç¼©æ”¾æ¸©æ¹¿åº¦æ•°å€¼ï¼ˆé™¤ä»¥ 10ï¼‰

### æœªæ¥å¯æ‰©å±•åŠŸèƒ½

å¦‚éœ€æ·»åŠ é…ç½®é€‰é¡¹ï¼Œå¯ä»¥åœ¨ `config_flow.py` ä¸­æ·»åŠ ï¼š

```python
# ç¤ºä¾‹ï¼šæ·»åŠ æ›´æ–°é—´éš”é…ç½®
data_schema=vol.Schema({
    vol.Optional("scan_interval", default=30): int,
})
```

---

## ğŸ”§ ç®¡ç†é›†æˆ

### é‡æ–°åŠ è½½é›†æˆ

1. è¿›å…¥ **è®¾ç½® â†’ è®¾å¤‡ä¸æœåŠ¡**
2. æ‰¾åˆ° **DayBetter Services**
3. ç‚¹å‡» **"..."** èœå•
4. é€‰æ‹© **"é‡æ–°åŠ è½½"**

### åˆ é™¤é›†æˆ

1. è¿›å…¥ **è®¾ç½® â†’ è®¾å¤‡ä¸æœåŠ¡**
2. æ‰¾åˆ° **DayBetter Services**
3. ç‚¹å‡» **"..."** èœå•
4. é€‰æ‹© **"åˆ é™¤"**
5. ç¡®è®¤åˆ é™¤

### æŸ¥çœ‹æ—¥å¿—

1. è¿›å…¥ **è®¾ç½® â†’ ç³»ç»Ÿ â†’ æ—¥å¿—**
2. æœç´¢ `daybetter`
3. æŸ¥çœ‹é”™è¯¯æˆ–è­¦å‘Šä¿¡æ¯

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šæœç´¢ä¸åˆ°é›†æˆ

**åŸå› **ï¼šå¯èƒ½æ˜¯æ–‡ä»¶æœªæ­£ç¡®å¤åˆ¶æˆ– Home Assistant æœªé‡å¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åœæ­¢è°ƒè¯• (`Shift+F5`)
2. è¿è¡Œä»»åŠ¡ï¼š`ğŸ“‹ DayBetter: å¤åˆ¶åˆ° custom_components`
3. é‡æ–°å¯åŠ¨ (`F5`)
4. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ (`Ctrl+Shift+R`)

### é—®é¢˜ 2ï¼šæ·»åŠ åæ²¡æœ‰ä¼ æ„Ÿå™¨

**å¯èƒ½åŸå› **ï¼š
- API æ²¡æœ‰è¿”å› `type=5` çš„è®¾å¤‡
- ç½‘ç»œè¿æ¥é—®é¢˜
- PyPI åŒ…æœªæ­£ç¡®å®‰è£…

**æ£€æŸ¥æ–¹æ³•**ï¼š
1. æŸ¥çœ‹æ—¥å¿—ï¼š**è®¾ç½® â†’ ç³»ç»Ÿ â†’ æ—¥å¿—**
2. æœç´¢ `daybetter` æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
3. åœ¨è°ƒè¯•å™¨ä¸­åœ¨ `daybetter_api.py` æ·»åŠ æ–­ç‚¹æŸ¥çœ‹æ•°æ®

### é—®é¢˜ 3ï¼šæ•°å€¼ä¸æ­£ç¡®

**æ£€æŸ¥**ï¼š
1. æŸ¥çœ‹åŸå§‹ API è¿”å›å€¼
2. ç¡®è®¤ç¼©æ”¾é€»è¾‘ï¼ˆé™¤ä»¥ 10ï¼‰æ˜¯å¦æ­£ç¡®
3. åœ¨ `daybetter_api.py` çš„ `_scale` å‡½æ•°æ·»åŠ æ–­ç‚¹

### é—®é¢˜ 4ï¼šæç¤º"åªå…è®¸ä¸€ä¸ªå®ä¾‹"

è¿™æ˜¯æ­£å¸¸çš„ï¼è¯¥é›†æˆè®¾è®¡ä¸ºå•ä¾‹æ¨¡å¼ï¼Œåªèƒ½æ·»åŠ ä¸€æ¬¡ã€‚

å¦‚éœ€é‡æ–°é…ç½®ï¼š
1. å…ˆåˆ é™¤ç°æœ‰é›†æˆ
2. å†é‡æ–°æ·»åŠ 

---

## ğŸ“Š è°ƒè¯• UI é…ç½®æµç¨‹

### æ·»åŠ æ–­ç‚¹

åœ¨ `config_flow.py` ä¸­æ·»åŠ æ–­ç‚¹ï¼š

```python
async def async_step_user(self, user_input: dict[str, Any] | None = None):
    """Handle the initial step."""
    if user_input is not None:  # â† åœ¨è¿™é‡Œæ·»åŠ æ–­ç‚¹
        return self.async_create_entry(...)
```

### æŸ¥çœ‹ç”¨æˆ·è¾“å…¥

æ–­ç‚¹æš‚åœæ—¶æŸ¥çœ‹ `user_input` å˜é‡çš„å†…å®¹ã€‚

---

## ğŸ¨ è‡ªå®šä¹‰ UI æ–‡æœ¬

### ä¿®æ”¹ä¸­æ–‡æ–‡æœ¬

ç¼–è¾‘æ–‡ä»¶ï¼š
```
homeassistant/components/daybetter_services/translations/zh-Hans.json
```

### ä¿®æ”¹è‹±æ–‡æ–‡æœ¬

ç¼–è¾‘æ–‡ä»¶ï¼š
```
homeassistant/components/daybetter_services/translations/en.json
```

ä¿®æ”¹åéœ€è¦ï¼š
1. å¤åˆ¶åˆ° custom_components
2. é‡å¯ Home Assistant
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `config_flow.py` | UI é…ç½®æµç¨‹é€»è¾‘ |
| `strings.json` | é»˜è®¤ UI æ–‡æœ¬ |
| `translations/zh-Hans.json` | ä¸­æ–‡ç¿»è¯‘ |
| `translations/en.json` | è‹±æ–‡ç¿»è¯‘ |
| `manifest.json` | é›†æˆå…ƒæ•°æ®ï¼ˆåŒ…å« `config_flow: true`ï¼‰ |

---

## âœ… å®Œæ•´å·¥ä½œæµç¨‹

```
1. å¯åŠ¨ Home Assistant (F5)
   â†“
2. æ‰“å¼€æµè§ˆå™¨ http://localhost:8123
   â†“
3. è®¾ç½® â†’ è®¾å¤‡ä¸æœåŠ¡ â†’ æ·»åŠ é›†æˆ
   â†“
4. æœç´¢ "DayBetter"
   â†“
5. ç‚¹å‡»æ·»åŠ ï¼Œå¡«å†™è¡¨å•
   â†“
6. æäº¤ï¼Œç­‰å¾…é›†æˆåŠ è½½
   â†“
7. æŸ¥çœ‹è®¾å¤‡å’Œä¼ æ„Ÿå™¨
   â†“
8. æ·»åŠ åˆ°ä»ªè¡¨æ¿
```

---

## ğŸ‰ ç°åœ¨å¼€å§‹ä½¿ç”¨ï¼

1. **æŒ‰ F5** å¯åŠ¨ Home Assistant
2. æ‰“å¼€ **http://localhost:8123**
3. è¿›å…¥ **è®¾ç½® â†’ è®¾å¤‡ä¸æœåŠ¡ â†’ æ·»åŠ é›†æˆ**
4. æœç´¢å¹¶æ·»åŠ  **DayBetter Services**
5. äº«å—ä½ çš„æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ï¼ğŸŒ¡ï¸ğŸ’§

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [VS_CODE_READY.md](VS_CODE_READY.md) - VS Code è°ƒè¯•å¿«é€Ÿå¼€å§‹
- [DEBUG_GUIDE.md](DEBUG_GUIDE.md) - å‘½ä»¤è¡Œè°ƒè¯•æŒ‡å—
- [INTEGRATION_SUMMARY.md](INTEGRATION_SUMMARY.md) - é›†æˆåŠŸèƒ½æ–‡æ¡£

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

